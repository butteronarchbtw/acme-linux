#!/usr/bin/env bash

usage() {
	printf "usage:\n"
	printf "\t$0 (acme|sam)\n"
}

if [[ ! $# -eq 1 ]]; then
	usage
	exit 1
fi

cfg="config.mk"
declare -a bins
declare -a man1s

case $1 in
	acme)
	bins+=("\$(SRC_DIR)/cmd/acme/acme")
	man1s+=("\$(MAN_DIR)/man1/acme.1")
	;;
	sam)
	bins+=("\$(SRC_DIR)/cmd/sam/sam")
	bins+=("\$(SRC_DIR)/cmd/samterm/samterm")
	man1s+=("\$(MAN_DIR)/man1/sam.1")
	;;
	*)
	usage
	exit 1
	;;
esac

IFS=' '
printf "BINS+=%s\n" "${bins[*]}" > $cfg
printf "MAN1S+=%s\n" "${man1s[*]}" >> $cfg
